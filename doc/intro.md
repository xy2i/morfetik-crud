# Morfetik

Morfetik  allows to query words from the French language in any form, and get back the original form, as well as lexical information on the lemma.

#Â Structure of the application

The application is developped in PHP, with the [Yii framework](https://www.yiiframework.com/). A useful resource to understand it quickly is the Yii "Getting Started" guide, which [you can find here](https://www.yiiframework.com/doc/guide/2.0/en/start-prerequisites).
he web app is developped in MVC-style. For example, views related to the search functionality will be found in `views/search`.

Here's a quick tour of what Morfetik does:
* [it can search for words](./search.md): this is its main use case. Related functionality is in `search` folders.
* [it has a CRUD edition interface](./crud.md). Related functionality is in `crud` folders.
* [it has an administration interface](./admin.md). Related functionality is in `admin` folders, as well as in `models/User.php`.

# Design

For the most part, Morfetik is a CRUD over a few database tables. 

The project has been around for a very long time, so the database design is old, antiquated and doens't work well in places. Morfetik tries to patch around these issues to the best of our ability. If you see something odd with the handling of the DB in application code, that's why.

In particular, the DB does not use foreign keys to indicate relations between records. Instead, it uses a giant table that's automatically generated to store all of this information. Originally, the table was generated by a program that has since been lost. Morfetik uses a SQL stored procedure, ran *every day*, to regenerate this table. Here's the documentation on this [stored procedure](./stored-procedure.md).
Note that because of this, **changes made in the editing interface of Morfetik won't apply until the start of the next day.** 

## DB basics 

Data is stored in a few tables - let's step through the most important ones:
```sh
adv      # Adverbes
alemmes  # Adjectifs (lemmes)
gram     # Grammaire
nslemmes # Noms      (lemmes)
vslemmes # Verbes    (lemmes)
```

These tables represent data: like an adjectif or a verbe. Some tables are named, for example, `alemmes` instead of `adjectif`. This is because their counterpart exist:

```sh
acodes  # Adverbes (codes)
nscodes # Noms     (codes)
vscodes # Verbes   (codes)
```

What's a code? The easiest way to see is with an example. Let's select from `alemmes`:
```sql
select * from nslemmes where Lemme="pomme" limit 1;
+--------+-------+---------+------+------+-----+-----+-----+----------+-------+
| ID     | Lemme | CatGram | Flex | Dom  | Grs | Maj | Lig | Standard | Notes |
+--------+-------+---------+------+------+-----+-----+-----+----------+-------+
| N52413 | pomme | nf      | 01   | NULL |     |     |     | NULL     | NULL  |
+--------+-------+---------+------+------+-----+-----+-----+----------+-------+
```

We get, for the word "pomme", along with some information about the word, Flex equal to 40. This field is used to create "flexions" of the lemme, which are kind of like extended forms of the word. If we look for that 40 in the `nslemmes` table, we get: